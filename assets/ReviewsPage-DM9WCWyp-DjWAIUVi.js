import{a as e,f as s,E as t,o as a,U as l,b as r,F as n,T as i,q as c,i as m,S as d}from"./index-DXuD6IJr.js";const x=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-teal-500"];function o({rating:t,onRatingChange:a,readonly:r=!1,size:n="md"}){const[i,c]=e.useState(0),m={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[n];return s.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>{const n=e<=(i||t);return s.jsx(l,{className:`${m} ${n?"text-yellow-400 fill-current":"text-gray-300"} ${r?"":"cursor-pointer hover:scale-110 transition-transform"}`,onClick:()=>!r&&(null==a?void 0:a(e)),onMouseEnter:()=>!r&&c(e),onMouseLeave:()=>!r&&c(0)},e)})})}function h({review:e,index:t}){return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold ${a=t,x[a%x.length]}`,children:(l=e.name,l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),e.age&&s.jsxs("p",{className:"text-sm text-gray-600",children:[e.age," лет"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{rating:e.rating,readonly:!0,size:"sm"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["(",e.rating,".0)"]})]})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:e.comment}),s.jsx("p",{className:"text-sm text-gray-500",children:(e=>e?new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}):"недавно")(e.date)})]})]})});var a,l}function g(){const[x,g]=e.useState([]),[u,j]=e.useState(!0),[b,p]=e.useState(!1),[f,N]=e.useState(!1),[y,v]=e.useState(!1),[w,k]=e.useState({name:"",email:"",rating:0,comment:""}),[S,C]=e.useState({});e.useEffect(()=>{fetch("/data/reviews.json").then(e=>e.json()).then(e=>{const s=e.map((e,s)=>({...e,date:new Date(Date.now()-365*Math.random()*24*60*60*1e3).toISOString()}));g(s),j(!1)}).catch(()=>j(!1))},[]);const z=x.length>0?(x.reduce((e,s)=>e+s.rating,0)/x.length).toFixed(1):"5.0",D=[5,4,3,2,1].map(e=>{const s=x.filter(s=>s.rating===e).length,t=x.length>0?s/x.length*100:0;return{rating:e,count:s,percentage:t}});return u?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen py-8 bg-gray-50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("nav",{className:"mb-8 text-sm","aria-label":"Breadcrumb",children:s.jsxs("ol",{className:"flex items-center space-x-2",children:[s.jsx("li",{children:s.jsx(t,{to:"/",className:"text-blue-600 hover:text-blue-700",children:"Главная"})}),s.jsx("li",{children:s.jsx("span",{className:"text-gray-400",children:"/"})}),s.jsx("li",{children:s.jsx("span",{className:"text-gray-900 font-medium",children:"Отзывы"})})]})}),y&&s.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 flex items-center space-x-2",children:[s.jsx(a,{className:"w-5 h-5"}),s.jsx("span",{children:"Спасибо за ваш отзыв!"})]}),s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Отзывы клиентов"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Что говорят наши клиенты о качестве работы мастера Манаса"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8 mb-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"text-center lg:text-left",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-5xl font-bold text-gray-900 mb-2",children:z}),s.jsx(o,{rating:Math.round(parseFloat(z)),readonly:!0,size:"lg"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:[x.length," отзывов"]})]}),s.jsxs("div",{className:"flex-1 w-full lg:w-auto",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Распределение оценок"}),s.jsx("div",{className:"space-y-2",children:D.map(({rating:e,count:t,percentage:a})=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm text-gray-600 w-6",children:e}),s.jsx(l,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${a}%`}})}),s.jsx("span",{className:"text-sm text-gray-600 w-8",children:t})]},e))})]})]})}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Поделитесь своим опытом"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Ваш отзыв поможет другим клиентам сделать правильный выбор"}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[s.jsx(r,{className:"w-5 h-5"}),s.jsx("span",{children:"Оставить отзыв"})]})]})})]})}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"sticky top-0 bg-white p-6 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Оставить отзыв"}),s.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(n,{className:"w-6 h-6"})})]})}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),(()=>{const e={};return w.name.trim()?w.name.trim().length<2&&(e.name="Имя должно содержать минимум 2 символа"):e.name="Имя обязательно для заполнения",w.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)||(e.email="Введите корректный email адрес"):e.email="Email обязателен для заполнения",0===w.rating&&(e.rating="Пожалуйста, поставьте оценку"),w.comment.trim()?w.comment.trim().length<10?e.comment="Комментарий должен содержать минимум 10 символов":w.comment.trim().length>500&&(e.comment="Комментарий не должен превышать 500 символов"):e.comment="Комментарий обязателен для заполнения",C(e),0===Object.keys(e).length})()&&(N(!0),setTimeout(()=>{const e={name:w.name,rating:w.rating,comment:w.comment,date:(new Date).toISOString()};g([e,...x]),k({name:"",email:"",rating:0,comment:""}),p(!1),N(!1),v(!0),setTimeout(()=>v(!1),5e3)},1500))},className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя *"}),s.jsxs("div",{className:"relative",children:[s.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",value:w.name,onChange:e=>k({...w,name:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 "+(S.name?"border-red-500":"border-gray-300"),placeholder:"Ваше имя"})]}),S.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"email",value:w.email,onChange:e=>k({...w,email:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 "+(S.email?"border-red-500":"border-gray-300"),placeholder:"your@email.com"})]}),S.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ваша оценка *"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(o,{rating:w.rating,onRatingChange:e=>k({...w,rating:e}),size:"lg"}),w.rating>0&&s.jsxs("span",{className:"text-sm text-gray-600",children:["(",w.rating," из 5)"]})]}),S.rating&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.rating})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ваш отзыв *"}),s.jsx("textarea",{value:w.comment,onChange:e=>k({...w,comment:e.target.value}),rows:4,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none "+(S.comment?"border-red-500":"border-gray-300"),placeholder:"Расскажите о вашем опыте работы с мастером Манасом..."}),s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsx("div",{children:S.comment&&s.jsx("p",{className:"text-red-600 text-sm",children:S.comment})}),s.jsxs("p",{className:"text-sm text-gray-500",children:[w.comment.length,"/500"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Фото (опционально)"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"cursor-pointer bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 text-sm text-gray-600 transition-colors flex items-center space-x-2",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsx("span",{children:"Выбрать файл"}),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t){if(!t.type.startsWith("image/"))return void C({...S,photo:"Можно загружать только изображения"});if(t.size>5242880)return void C({...S,photo:"Размер файла не должен превышать 5MB"});k({...w,photo:t}),C({...S,photo:""})}},className:"hidden"})]}),w.photo&&s.jsx("span",{className:"text-sm text-green-600",children:w.photo.name})]}),S.photo&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.photo})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-3 rounded-lg font-medium transition-colors",disabled:f,children:"Отмена"}),s.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:f?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4"}),s.jsx("span",{children:"Отправить отзыв"})]})})]})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Все отзывы (",x.length,")"]}),0===x.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(r,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Пока нет отзывов"}),s.jsx("p",{className:"text-gray-600",children:"Будьте первым, кто оставит отзыв о работе мастера Манаса"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map((e,t)=>s.jsx(h,{review:e,index:t},t))})]}),s.jsxs("div",{className:"mt-12 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-8 text-center text-white",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Готовы заказать услугу?"}),s.jsx("p",{className:"text-blue-100 mb-6",children:"Присоединяйтесь к довольным клиентам мастера Манаса"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("a",{href:"tel:+77055535332",className:"bg-white text-blue-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-medium transition-colors",children:"📞 +7 705 553 53 32"}),s.jsx("a",{href:"https://wa.me/77055535332",target:"_blank",rel:"noopener noreferrer",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"💬 Написать в WhatsApp"})]})]})]})})}export{g as ReviewsPage};
//# sourceMappingURL=ReviewsPage-DM9WCWyp-DjWAIUVi.js.map
