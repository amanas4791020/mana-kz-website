import{j as e}from"./ui-KNsN3tFJ.js";import{r as s,L as t}from"./router-C54lqrd6.js";import{h as a,S as l,m as r,X as n,U as i,n as c,i as m,o as d}from"./icons-2Wv2yAMS.js";import"./vendor-Z2Iecplj.js";const x=["bg-blue-500","bg-green-500","bg-purple-500","bg-red-500","bg-yellow-500","bg-indigo-500","bg-pink-500","bg-teal-500"];function o(e){return x[e%x.length]}function h({rating:t,onRatingChange:a,readonly:r=!1,size:n="md"}){const[i,c]=s.useState(0),m={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[n];return e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(s=>{const n=s<=(i||t);return e.jsx(l,{className:`${m} ${n?"text-yellow-400 fill-current":"text-gray-300"} ${r?"":"cursor-pointer hover:scale-110 transition-transform"}`,onClick:()=>!r&&(null==a?void 0:a(s)),onMouseEnter:()=>!r&&c(s),onMouseLeave:()=>!r&&c(0)},s)})})}function g({review:s,index:t}){return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold ${o(t)}`,children:(a=s.name,a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),s.age&&e.jsxs("p",{className:"text-sm text-gray-600",children:[s.age," лет"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{rating:s.rating,readonly:!0,size:"sm"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",s.rating,".0)"]})]})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:s.comment}),e.jsx("p",{className:"text-sm text-gray-500",children:(e=>{if(!e)return"недавно";return new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})(s.date)})]})]})});var a}function u(){const[x,o]=s.useState([]),[u,j]=s.useState(!0),[p,b]=s.useState(!1),[f,N]=s.useState(!1),[y,v]=s.useState(!1),[w,S]=s.useState({name:"",email:"",rating:0,comment:""}),[k,C]=s.useState({});s.useEffect(()=>{fetch("/data/reviews.json").then(e=>e.json()).then(e=>{const s=e.map((e,s)=>({...e,date:new Date(Date.now()-365*Math.random()*24*60*60*1e3).toISOString()}));o(s),j(!1)}).catch(()=>j(!1))},[]);const z=x.length>0?(x.reduce((e,s)=>e+s.rating,0)/x.length).toFixed(1):"5.0",D=[5,4,3,2,1].map(e=>{const s=x.filter(s=>s.rating===e).length,t=x.length>0?s/x.length*100:0;return{rating:e,count:s,percentage:t}});return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen py-8 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("nav",{className:"mb-8 text-sm","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-2",children:[e.jsx("li",{children:e.jsx(t,{to:"/",className:"text-blue-600 hover:text-blue-700",children:"Главная"})}),e.jsx("li",{children:e.jsx("span",{className:"text-gray-400",children:"/"})}),e.jsx("li",{children:e.jsx("span",{className:"text-gray-900 font-medium",children:"Отзывы"})})]})}),y&&e.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 flex items-center space-x-2",children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:"Спасибо за ваш отзыв!"})]}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Отзывы клиентов"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Что говорят наши клиенты о качестве работы мастера Манаса"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"text-center lg:text-left",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-5xl font-bold text-gray-900 mb-2",children:z}),e.jsx(h,{rating:Math.round(parseFloat(z)),readonly:!0,size:"lg"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[x.length," отзывов"]})]}),e.jsxs("div",{className:"flex-1 w-full lg:w-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Распределение оценок"}),e.jsx("div",{className:"space-y-2",children:D.map(({rating:s,count:t,percentage:a})=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600 w-6",children:s}),e.jsx(l,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${a}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:t})]},s))})]})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Поделитесь своим опытом"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ваш отзыв поможет другим клиентам сделать правильный выбор"}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2",children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("span",{children:"Оставить отзыв"})]})]})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Оставить отзыв"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(n,{className:"w-6 h-6"})})]})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),(()=>{const e={};return w.name.trim()?w.name.trim().length<2&&(e.name="Имя должно содержать минимум 2 символа"):e.name="Имя обязательно для заполнения",w.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email)||(e.email="Введите корректный email адрес"):e.email="Email обязателен для заполнения",0===w.rating&&(e.rating="Пожалуйста, поставьте оценку"),w.comment.trim()?w.comment.trim().length<10?e.comment="Комментарий должен содержать минимум 10 символов":w.comment.trim().length>500&&(e.comment="Комментарий не должен превышать 500 символов"):e.comment="Комментарий обязателен для заполнения",C(e),0===Object.keys(e).length})()&&(N(!0),setTimeout(()=>{const e={name:w.name,rating:w.rating,comment:w.comment,date:(new Date).toISOString()};o([e,...x]),S({name:"",email:"",rating:0,comment:""}),b(!1),N(!1),v(!0),setTimeout(()=>v(!1),5e3)},1500))},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя *"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:w.name,onChange:e=>S({...w,name:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 "+(k.name?"border-red-500":"border-gray-300"),placeholder:"Ваше имя"})]}),k.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:w.email,onChange:e=>S({...w,email:e.target.value}),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 "+(k.email?"border-red-500":"border-gray-300"),placeholder:"your@email.com"})]}),k.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ваша оценка *"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(h,{rating:w.rating,onRatingChange:e=>S({...w,rating:e}),size:"lg"}),w.rating>0&&e.jsxs("span",{className:"text-sm text-gray-600",children:["(",w.rating," из 5)"]})]}),k.rating&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.rating})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ваш отзыв *"}),e.jsx("textarea",{value:w.comment,onChange:e=>S({...w,comment:e.target.value}),rows:4,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none "+(k.comment?"border-red-500":"border-gray-300"),placeholder:"Расскажите о вашем опыте работы с мастером Манасом..."}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("div",{children:k.comment&&e.jsx("p",{className:"text-red-600 text-sm",children:k.comment})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[w.comment.length,"/500"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Фото (опционально)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"cursor-pointer bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-lg px-4 py-2 text-sm text-gray-600 transition-colors flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Выбрать файл"}),e.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t){if(!t.type.startsWith("image/"))return void C({...k,photo:"Можно загружать только изображения"});if(t.size>5242880)return void C({...k,photo:"Размер файла не должен превышать 5MB"});S({...w,photo:t}),C({...k,photo:""})}},className:"hidden"})]}),w.photo&&e.jsx("span",{className:"text-sm text-green-600",children:w.photo.name})]}),k.photo&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:k.photo})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-3 rounded-lg font-medium transition-colors",disabled:f,children:"Отмена"}),e.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:f?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{children:"Отправить отзыв"})]})})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Все отзывы (",x.length,")"]}),0===x.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(r,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Пока нет отзывов"}),e.jsx("p",{className:"text-gray-600",children:"Будьте первым, кто оставит отзыв о работе мастера Манаса"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map((s,t)=>e.jsx(g,{review:s,index:t},t))})]}),e.jsxs("div",{className:"mt-12 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-8 text-center text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Готовы заказать услугу?"}),e.jsx("p",{className:"text-blue-100 mb-6",children:"Присоединяйтесь к довольным клиентам мастера Манаса"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("a",{href:"tel:+77055535332",className:"bg-white text-blue-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-medium transition-colors",children:"📞 +7 705 553 53 32"}),e.jsx("a",{href:"https://wa.me/77055535332",target:"_blank",rel:"noopener noreferrer",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"💬 Написать в WhatsApp"})]})]})]})})}export{u as ReviewsPage};
//# sourceMappingURL=ReviewsPage-DM9WCWyp.js.map
